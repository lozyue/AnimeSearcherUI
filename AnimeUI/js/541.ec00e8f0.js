(self["webpackChunkAnimeUI"]=self["webpackChunkAnimeUI"]||[]).push([[541],{34751:function(e,t,n){"use strict";n.a(e,(async function(e){var a=n(95082),o=n(48534),r=(n(35666),n(41539),n(78783),n(33948),n(92222),n(54747),n(56598)),l=n(99172),i=n.n(l),s=n(89745),c=n(65490),u=n(23176),p=await n.e(497).then(n.bind(n,4516)),d=p.AuiConfig,f=(0,s.once)((0,o.Z)(regeneratorRuntime.mark((function e(){var t,a,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!d.AuiPlayer.hls){e.next=5;break}return e.next=3,n.e(31).then(n.t.bind(n,67631,23));case 3:t=e.sent,window["Hls"]=t.default;case 5:if(!d.AuiPlayer.flv){e.next=10;break}return e.next=8,Promise.all([n.e(184),n.e(197)]).then(n.t.bind(n,80510,23));case 8:a=e.sent,window["flvjs"]=a.default;case 10:if(!d.AuiPlayer.webtorrent){e.next=15;break}return e.next=13,Promise.all([n.e(184),n.e(415)]).then(n.t.bind(n,50861,23));case 13:o=e.sent,window["WebTorrent"]=o.default;case 15:if(!d.AuiPlayer.dash){e.next=20;break}return e.next=18,Promise.all([n.e(184),n.e(197)]).then(n.t.bind(n,97743,23));case 18:r=e.sent,window["dashjs"]=r.default;case 20:case"end":return e.stop()}}),e)})))),y=["play","pause","playing","ended","error","quality_start","canplay","fullscreen_cancel","fullscreen","settingchange","onplaynext"];t["Z"]=(0,r.defineComponent)({props:["options","animeTemp"],setup:function(e,t){var n=t.emit,o=(0,r.getCurrentInstance)(),l=o.proxy,p=e.options||{},d={storageMode:"outer",settingStorage:{},autoplay:!1,loop:!1,theme:"#ffa3df",lang:"zh-cn",screenshot:!1,hotkey:!0,preload:!0,logo:!1,contextmenu:[],video:{defaultQuality:0,type:"auto",topbar:{title:!0,meta:!0}},danmaku:null};(0,s.deepSupplement)(p,d);var f=null;(0,r.onMounted)((function(){var e=new(i())((0,a.Z)({element:l.$el},p));f=e,l.dlp=f,y.forEach((function(t){e._on(t,(function(){for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];n.apply(void 0,[t].concat(a))}))}))}));var m=function(e){var t,n;if(e.target&&["INPUT","TEXTAREA","SELECT","OPTION"].indexOf(e.target.tagName)>-1)return!1;var a=null===(t=document.activeElement)||void 0===t?void 0:t.tagName.toUpperCase(),o=null===(n=document.activeElement)||void 0===n?void 0:n.getAttribute("contenteditable");if("INPUT"===a||"TEXTAREA"===a||""===o||"true"===o)return!1;var r=this.dlp;r.focus=!0,r.video.focus()},h=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="lzyspeedHL",a=this.dlp,o=a.template.speed.children[1].children,r=o.length,l=0,i=r-1;i>=0;i--)if(o[i].classList.contains(n))break;if(i<0)throw new Error("[speedShift]: Target highlight Item has not found");var s=i-~~e,c=-1;return t?s<0?(l=i,c=0):s>=r?(l=r-1-i,c=r-1):(c=s,l=i-s):(c=(r+s)%r,l=i-c),o[c].click(),-l},v=function(){var e=0;return function(){var t=this.dlp,n=t.video.volume;e<=0?t.volume(e=0):t.volume(e),e=n}}(),w=function(){this.dlp.template.showDanmaku.click()},g=function(e){var t=this.dlp;t.danmaku.contact(e)},b=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["id","token","maxium"],a=function(t){var a="";n.forEach((function(t,n,o){(0,s.is_Defined)(e[t])&&(0!==n&&(a+="&"),a+="".concat(t,"=").concat(e[t]))}));var o=t.lastIndexOf("?"),r=t.lastIndexOf("/");return a.length?o>r?o===t.length-1?t+a:(0,c.ay)(t,"&",2)+a:t+"?"+a:t};u.DEBUG&&(window["addModifier"]=a),e.address=a(e.address),null===(t=e.addition)||void 0===t||t.forEach((function(e,t,n){n[t]=a(e)})),u.DEBUG&&console.log({danmuData:e}),this.dlp.reloadDanmu(e)},k=function(e){var t=this.dlp,n=t.danmaku;for(var a in e)switch(a){case"offsetTime":n.setOffsetTime(e[a]);break;case"scrollSpeed":n.setDanmuSpeed(e[a]);break;case"fontsize":n.setDanmuFontSize(e[a]);break;case"fixedDuration":n.setDanmuDuration(e[a]);break;case"orbitGap":n.options.orbitGap=e[a];break}};return{options:p,dlp:f,focusIt:m,speedShift:h,mute:v,toggleDanmu:w,contactDanmu:g,applyDanmu:b,danmuStyle:k}},mounted:function(){return(0,o.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:case"end":return e.stop()}}),e)})))()},unmounted:function(){this.dlp&&this.dlp.destroy()}}),e()}),1)},59315:function(e,t,n){"use strict";n.a(e,(async function(e){var a=n(48534),o=(n(35666),n(41539),n(78783),n(33948),n(57327),n(21249),n(92222),n(64595)),r=n(28157),l=n(56598),i=n(89745),s=n(23176),c=n(65490),u=n(40220),p=e([o]);o=(p.then?await p:p)[0];var d=function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(t){var a,o,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=t.toLowerCase(),e.next="hls"===e.t0?3:"flv"===e.t0?9:"webtorrent"===e.t0?15:"dash"===e.t0?21:27;break;case 3:if(window["Hls"]){e.next=8;break}return e.next=6,n.e(31).then(n.t.bind(n,67631,23));case 6:a=e.sent,window["Hls"]=a.default;case 8:return e.abrupt("break",27);case 9:if(window["flvjs"]){e.next=14;break}return e.next=12,Promise.all([n.e(184),n.e(197)]).then(n.t.bind(n,80510,23));case 12:o=e.sent,window["flvjs"]=o.default;case 14:return e.abrupt("break",27);case 15:if(window["WebTorrent"]){e.next=20;break}return e.next=18,Promise.all([n.e(184),n.e(415)]).then(n.t.bind(n,50861,23));case 18:r=e.sent,window["WebTorrent"]=r.default;case 20:return e.abrupt("break",27);case 21:if(window["dashjs"]){e.next=26;break}return e.next=24,Promise.all([n.e(184),n.e(197)]).then(n.t.bind(n,97743,23));case 24:l=e.sent,window["dashjs"]=l.default;case 26:return e.abrupt("break",27);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e,t){if(!e||!(0,i.is_Array)(e))return null;var n=e.map((function(e){return{name:e.caption,url:e.src,type:e.type}})).filter((function(e){return e.url}));return n.unshift({name:"默认",url:t.src,type:t.type}),s.DEBUG&&console.log("Current quality for playing:",n),n};t["Z"]=(0,l.defineComponent)({name:"lzyplayer",inheritAttrs:!1,props:{dlplayerConfigs:Object,animeTemp:Object,toolbar:{type:Object,default:{wideplay:!1,autoNext:!0,footerMsg:""}}},components:{"ly-dlplayer":o.Z},setup:function(e){var t=(0,l.getCurrentInstance)(),n=t.proxy,a=(0,r.AW)(),o=e.animeTemp,s=(0,u.g)(n,l.onUnmounted),p=(0,i.deepRefresh)((0,i.deepSupplement)({danmaku:{bottom:"46px",addition:[]},storageMode:"inner",settingStorage:{opacity:.9,volume:.5,danmaku:1,autoplay:1},dlbFull:!0,hotkeyProxy:!0},e.dlplayerConfigs),e.dlplayerConfigs),d=null,f=null;(0,l.onMounted)((function(){f=n.$refs.dlplayer,d=f.dlp,n.dlpIns=d,n.dlpWrap=f;var e=(0,c.a8)((function(e){d._on("fullscreen",e)}),(function(e){d._on("fullscreen_cancel",e)}),o);e&&(0,l.onUnmounted)((function(){var t=e.lockHandle,n=e.unlockHandle;d._off("fullscreen",t),d._off("fullscreen_cancel",n)})),(0,l.watchEffect)((function(){d.options.dlbFull=p.dlbFull}))}));var y=(0,l.reactive)({title:"",name:"untitled",src:null,type:"auto",poster:"",topbar:null,quality:null,preplay:function(e){},postplay:function(e){}});return{display:a,dlplayerOptions:p,playingMeta:y,hotkeyList:s}},computed:{},methods:{playevent:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.$emit.apply(this,[e,this.dlpIns].concat(n))},reloadVideo:function(){var e=this.dlpIns,t=e.video.currentTime;e.switchVideo({pic:this.playingMeta.poster,url:this.playingMeta.src,type:this.playingMeta.type},{topbar:this.playingMeta.topbar,quality:f(this.playingMeta.quality,this.playingMeta)}),e.seek(t),e.play()},lzyplay:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark((function n(){var a,o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={preplay:function(e,t){},postplay:function(e,t){}},Object.assign(t.playingMeta,a),(0,i.objectRefresh)(t.playingMeta,e),n.next=5,d(t.playingMeta.type);case 5:o=t.dlpIns,r=t.dlpWrap,e.preplay(r,o),o.switchVideo({pic:t.playingMeta.poster,url:t.playingMeta.src,type:t.playingMeta.type},{topbar:t.playingMeta.topbar,quality:f(t.playingMeta.quality,t.playingMeta)}),o.seek(0),o.play(),e.postplay(r,o);case 13:case"end":return n.stop()}}),n)})))()},hotkeyResp:function(e,t){var n,a,o=null===(n=document.activeElement)||void 0===n?void 0:n.tagName.toUpperCase(),r=null===(a=document.activeElement)||void 0===a?void 0:a.getAttribute("contenteditable");"INPUT"!==o&&"TEXTAREA"!==o&&""!==r&&"true"!==r&&this.dlpIns.hotkey.hotkeyResp(e,t)},relocatePlayer:function(){var e=this.$el;e&&this.$magic.utils.lyscrollTo({target:e,offsetTop:-77})}},mounted:function(){var e=this,t=this.$magic.utils.addToInterface;t((function(t){t(e.dlpIns,e)}),"auiplayer")},unmounted:function(){}})}))},40220:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var a=n(23176),o=!1,r=function(e,t){return[{name:"toggle-danmu",descriptions:"切换弹幕显示",commonKey:"D",invoke:function(){e.dlpWrap.toggleDanmu()}},{name:"toggle-mute",descriptions:"快速切换播放器静音",commonKey:"M",invoke:function(){e.dlpWrap.mute()}},{name:"next-episode",descriptions:"播放下一集",commonKey:"]",invoke:function(t){e.playevent("playnext")}},{name:"pre-episode",descriptions:"播放上一集",commonKey:"[",invoke:function(t){e.playevent("playnext",!0)}},{name:"player-relocate",descriptions:"滚动定位并聚焦到播放器",commonKey:"R",invoke:function(t){e.relocatePlayer(),e.dlpWrap.focusIt()}},{name:"player-full",descriptions:"播放器全屏",commonKey:"F",invoke:function(t){e.hotkeyResp("f",t)}},{name:"player-webfull",descriptions:"播放器网页全屏",commonKey:"W",invoke:function(t){e.hotkeyResp("w",t)}},{name:"player-forward",descriptions:"方向键→短按前进5s,长按倍速播放",commonKey:"ArrowRight",invoke:function(){var n=!1,r=0,l=0,i=0,s=function(t){"ArrowRight"===t.code&&r>0&&(o&&a.DEBUG&&console.log("onkeyup",{counts:r,gearGap:l,onceActive:n}),e.dlpWrap.speedShift(l),n=!1,r=0,l=0)};return t((function(){window.removeEventListener("keyup",s)})),window.addEventListener("keyup",s),function(t){o&&a.DEBUG&&console.log("keydown",{counts:r,gearGap:l,onceActive:n,eve:t}),!0!==n&&(clearTimeout(i),i=setTimeout((function(){r<=0?e.hotkeyResp("right",t):l=e.dlpWrap.speedShift(4)}),175),r++,n=!0)}}()},{name:"player-backward",descriptions:"方向键←视频播放后退5s",commonKey:"ArrowLeft",invoke:function(t){e.hotkeyResp("left",t)}},{name:"player-up",descriptions:"方向键↑播放器提高5%",commonKey:"ArrowUp",invoke:function(t){e.hotkeyResp("up",t)}},{name:"player-down",descriptions:"方向键↓播放器音量减小5%",commonKey:"ArrowDown",invoke:function(t){e.hotkeyResp("down",t)}},{name:"player-pause",descriptions:"播放器的播放暂停的切换",commonKey:" ",invoke:function(t){t.preventDefault(),e.hotkeyResp("space",t)}},{name:"player-esc",descriptions:"ESC键退出全屏播放",commonKey:"Escape",invoke:function(t){e.hotkeyResp("ESC",t)}}]}},64595:function(e,t,n){"use strict";n.a(e,(async function(e){var a=n(33610),o=n(49777),r=n(83744),l=e([o]);o=(l.then?await l:l)[0];const i=(0,r.Z)(o.Z,[["render",a.s]]);t["Z"]=i}))},40541:function(e,t,n){"use strict";n.a(e,(async function(e){var a=n(74687),o=n(44317),r=(n(82925),n(83744)),l=e([o]);o=(l.then?await l:l)[0];const i=(0,r.Z)(o.Z,[["render",a.s]]);t["Z"]=i}))},91584:function(e,t,n){"use strict";n.r(t);var a=n(8081),o=n.n(a),r=n(23645),l=n.n(r),i=l()(o());i.push([e.id,'#lzyplayer{width:100%;border:1px solid gray;box-shadow:2px 3px 10px #000}#lzyplayer .player-head{margin:7px auto 10px 12px;color:#21acff;width:100%;min-height:1.25em}#lzyplayer .player-head span{color:#000}#lzyplayer .player-head span:before{content:"·";color:rgb(var(--v-theme-on-background));font-size:18px;display:inline-block;margin:auto 5px}#lzyplayer .player-controller{display:flex;justify-content:space-around;align-items:center;width:100%;padding:0 0 0 6px;font-size:12px;background-color:rgb(var(--v-theme-surface));-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#lzyplayer .player-controller>span{color:rgb(var(--v-theme-on-surface));flex:1 1 auto;text-align:center}#lzyplayer .player-controller>span.player-switch>*{display:inline-block;vertical-align:middle}#lzyplayer .player-controller>span.player-msg-container{flex:2 2 auto}#lzyplayer .player-controller>span.player-msg-container .player-msg{display:inline-flex;align-items:center;padding-left:.75em;height:28px;list-style:28px;min-width:188px;width:88%;font-size:12px;border:1px solid #ecf2f9;border-radius:4px;background-color:#ecf2f9;box-shadow:0 0 1px gray;overflow:hidden;overflow:-moz-hidden-unscrollable}#lzyplayer .player-controller>span.player-msg-container .player-msg .rollbar{word-break:keep-all;white-space:nowrap;overflow:visible;width:-webkit-max-content;width:-moz-max-content;width:max-content}#lzyplayer .player-controller>span.player-msg-container .player-msg:hover .rollbar{-webkit-animation:lzyXTransform 6s cubic-bezier(.3,.19,.73,1.21) infinite;animation:lzyXTransform 6s cubic-bezier(.3,.19,.73,1.21) infinite}@-webkit-keyframes lzyXTransform{0%,to{transform:translateX(0)}50%{transform:translateX(calc(18em - 100%))}}@keyframes lzyXTransform{0%,to{transform:translateX(0)}50%{transform:translateX(calc(18em - 100%))}}#lzyplayer .player-controller .player-switch.auto-next .v-switch .v-selection-control.v-selection-control--dirty{color:#eab4f8}.dark-token #lzyplayer .player-controller span.player-msg-container .player-msg{border:1px solid #060c13;background-color:#060c13}',""]),t["default"]=i},49777:function(e,t,n){"use strict";n.a(e,(async function(e){n.d(t,{Z:function(){return a.Z}});var a=n(34751),o=e([a]);a=(o.then?await o:o)[0]}))},44317:function(e,t,n){"use strict";n.a(e,(async function(e){n.d(t,{Z:function(){return a.Z}});var a=n(59315),o=e([a]);a=(o.then?await o:o)[0]}))},82925:function(e,t,n){"use strict";n(44022)},44022:function(e,t,n){var a=n(91584);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var o=n(54402).Z;o("565fb5f4",a,!0,{sourceMap:!1,shadowMode:!1})},33610:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});var a=n(56598),o={id:"dlplayer"};function r(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("div",o)}},74687:function(e,t,n){"use strict";n.d(t,{s:function(){return T}});n(68309),n(74916),n(15306);var a=n(56598),o=n(52653),r=n(46769),l=n(76924),i={class:"player-head"},s={class:"player-controller"},c={"data-balloon":"播放下一集","data-balloon-pos":"down"},u=(0,a.createTextVNode)("mdi-skip-next"),p={key:0,class:"player-switch"},d=(0,a.createElementVNode)("span",null,"宽屏",-1),f={"data-balloon":"卡点重载","data-balloon-pos":"down"},y=(0,a.createTextVNode)("mdi-sync"),m={key:1,class:"player-msg-container"},h=["title"],v=["innerHTML"],w={"data-balloon":"选择弹幕","data-balloon-pos":"down"},g=(0,a.createTextVNode)("mdi-message-bulleted"),b={"data-balloon":"外挂额外弹幕","data-balloon-pos":"down"},k=(0,a.createTextVNode)("mdi-text-box-plus"),x={class:"player-switch auto-next"},E=(0,a.createElementVNode)("span",null,"自动切P",-1);function T(e,t){var n=(0,a.resolveComponent)("ly-dlplayer"),T=(0,a.resolveDirective)("shortcuts");return(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("div",{id:"lzyplayer",onClick:t[8]||(t[8]=function(){var t;return e.$refs.dlplayer.focusIt&&(t=e.$refs.dlplayer).focusIt.apply(t,arguments)})},[(0,a.createElementVNode)("h4",i,[(0,a.createTextVNode)((0,a.toDisplayString)("".concat(e.playingMeta.title))+" ",1),(0,a.withDirectives)((0,a.createElementVNode)("span",{style:{color:"#ff9800"}},(0,a.toDisplayString)(e.playingMeta.name),513),[[a.vShow,e.playingMeta.title&&e.playingMeta.name]])]),(0,a.createVNode)(n,{ref:"dlplayer",options:e.dlplayerOptions,onOnplaynext:t[0]||(t[0]=function(t){return e.playevent("playnext")}),onEnded:t[1]||(t[1]=function(t){return e.playevent("ended")})},null,8,["options"]),(0,a.createElementVNode)("div",s,[(0,a.createElementVNode)("span",c,[(0,a.createVNode)(o.T,{size:"small",color:"#fcbad3",onClick:t[2]||(t[2]=function(t){return e.playevent("playnext")})},{default:(0,a.withCtx)((function(){return[(0,a.createVNode)(r.t,{color:"white"},{default:(0,a.withCtx)((function(){return[u]})),_:1})]})),_:1})]),e.animeTemp.isMobile?(0,a.createCommentVNode)("",!0):(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("span",p,[d,(0,a.createVNode)(l.G,{light:"",class:"ml-2",inset:"","hide-details":"",color:"tertiary",modelValue:e.toolbar.wideplay,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.toolbar.wideplay=t})},null,8,["modelValue"])])),[[T,{name:"player-widden",descriptions:"切换播放器宽屏模式",statuKey:null,commonKey:"E",caseSensitive:!1,invoke:function(t){e.toolbar.wideplay=!e.toolbar.wideplay}}]]),(0,a.createElementVNode)("span",f,[(0,a.createVNode)(o.T,{size:"small",color:"#fce2ce",onClick:t[4]||(t[4]=function(t){return e.reloadVideo()})},{default:(0,a.withCtx)((function(){return[(0,a.createVNode)(r.t,{color:"white"},{default:(0,a.withCtx)((function(){return[y]})),_:1})]})),_:1})]),e.animeTemp.isMobile?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("span",m,[(0,a.createElementVNode)("div",{class:"player-msg",title:e.toolbar.footerMsg.replace(/<span[^<>]*?>(.*?)<\/span>/g,"$1")},[(0,a.createElementVNode)("div",{class:"rollbar",innerHTML:e.toolbar.footerMsg},null,8,v)],8,h)])),(0,a.createElementVNode)("span",w,[(0,a.createVNode)(o.T,{icon:"",size:"small",flat:"",onClick:t[5]||(t[5]=(0,a.withModifiers)((function(t){return e.$emit("open-select")}),["stop"]))},{default:(0,a.withCtx)((function(){return[(0,a.createVNode)(r.t,{color:"info"},{default:(0,a.withCtx)((function(){return[g]})),_:1})]})),_:1})]),(0,a.createElementVNode)("span",b,[(0,a.createVNode)(o.T,{icon:"",size:"small",flat:"",onClick:t[6]||(t[6]=(0,a.withModifiers)((function(t){return e.$emit("open-addition")}),["stop"]))},{default:(0,a.withCtx)((function(){return[(0,a.createVNode)(r.t,{color:"#eab4f8",style:{position:"relative",top:"-2px"}},{default:(0,a.withCtx)((function(){return[k]})),_:1})]})),_:1})]),(0,a.createElementVNode)("span",x,[E,(0,a.createVNode)(l.G,{"hide-details":"",class:"ml-2",inset:"",color:"#eab4f8",modelValue:e.toolbar.autoNext,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.toolbar.autoNext=t})},null,8,["modelValue"])])])])),[[T,e.hotkeyList]])}}}]);