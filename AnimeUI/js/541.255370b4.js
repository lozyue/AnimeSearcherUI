(self["webpackChunkAnimeUI"]=self["webpackChunkAnimeUI"]||[]).push([[541],{34751:function(e,t,n){"use strict";n.a(e,(async function(e){var o=n(95082),a=n(48534),r=(n(35666),n(41539),n(78783),n(33948),n(92222),n(54747),n(56598)),l=n(99172),i=n.n(l),s=n(89745),c=n(65490),p=n(23176),u=await n.e(497).then(n.bind(n,4516)),d=u.AuiConfig,f=(0,s.once)((0,a.Z)(regeneratorRuntime.mark((function e(){var t,o,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!d.AuiPlayer.hls){e.next=5;break}return e.next=3,n.e(31).then(n.t.bind(n,67631,23));case 3:t=e.sent,window["Hls"]=t.default;case 5:if(!d.AuiPlayer.flv){e.next=10;break}return e.next=8,Promise.all([n.e(184),n.e(197)]).then(n.t.bind(n,80510,23));case 8:o=e.sent,window["flvjs"]=o.default;case 10:if(!d.AuiPlayer.webtorrent){e.next=15;break}return e.next=13,Promise.all([n.e(184),n.e(415)]).then(n.t.bind(n,50861,23));case 13:a=e.sent,window["WebTorrent"]=a.default;case 15:if(!d.AuiPlayer.dash){e.next=20;break}return e.next=18,Promise.all([n.e(184),n.e(197)]).then(n.t.bind(n,97743,23));case 18:r=e.sent,window["dashjs"]=r.default;case 20:case"end":return e.stop()}}),e)})))),y=["play","pause","playing","ended","error","quality_start","canplay","fullscreen_cancel","fullscreen","settingchange","onplaynext"];t["Z"]=(0,r.defineComponent)({props:["options","animeTemp"],setup:function(e,t){var n=t.emit,a=(0,r.getCurrentInstance)(),l=a.proxy,u=e.options||{},d={storageMode:"outer",settingStorage:{},autoplay:!1,loop:!1,theme:"#ffa3df",lang:"zh-cn",screenshot:!1,hotkey:!0,preload:!0,logo:!1,contextmenu:[],video:{defaultQuality:0,type:"auto",topbar:{title:!0,meta:!0}},danmaku:null};(0,s.deepSupplement)(u,d);var f=null;(0,r.onMounted)((function(){var e=new(i())((0,o.Z)({element:l.$el},u));f=e,l.dlp=f,y.forEach((function(t){e._on(t,(function(){for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];n.apply(void 0,[t].concat(o))}))}))}));var m=function(e){var t,n;if(e.target&&["INPUT","TEXTAREA","SELECT","OPTION"].indexOf(e.target.tagName)>-1)return!1;var o=null===(t=document.activeElement)||void 0===t?void 0:t.tagName.toUpperCase(),a=null===(n=document.activeElement)||void 0===n?void 0:n.getAttribute("contenteditable");if("INPUT"===o||"TEXTAREA"===o||""===a||"true"===a)return!1;var r=this.dlp;r.focus=!0,r.video.focus()},h=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="lzyspeedHL",o=this.dlp,a=0,r=o.template.speed.children[1].children,l=r.length,i=0;a<l;a++)if(r[a].classList.contains(n)){var s=a+~~e,c=-1;return t?s<0?(i=a,c=0):s>=l?(i=a-(l-1),c=l-1):(c=s,i=a-s):(c=(l+s)%l,i=a-c),r[c].click(),i}},v=function(){var e=0;return function(){var t=this.dlp,n=t.video.volume;e<=0?t.volume(e=0):t.volume(e),e=n}}(),w=function(){this.dlp.template.showDanmaku.click()},g=function(e){var t=this.dlp;t.danmaku.contact(e)},b=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["id","token","maxium"],o=function(t){var o="";n.forEach((function(t,n,a){(0,s.is_Defined)(e[t])&&(0!==n&&(o+="&"),o+="".concat(t,"=").concat(e[t]))}));var a=t.lastIndexOf("?"),r=t.lastIndexOf("/");return o.length?a>r?a===t.length-1?t+o:(0,c.ay)(t,"&",2)+o:t+"?"+o:t};p.DEBUG&&(window["addModifier"]=o),e.address=o(e.address),null===(t=e.addition)||void 0===t||t.forEach((function(e,t,n){n[t]=o(e)})),p.DEBUG&&console.log({danmuData:e}),this.dlp.reloadDanmu(e)},k=function(e){var t=this.dlp,n=t.danmaku;for(var o in e)switch(o){case"offsetTime":n.setOffsetTime(e[o]);break;case"scrollSpeed":n.setDanmuSpeed(e[o]);break;case"fontsize":n.setDanmuFontSize(e[o]);break;case"fixedDuration":n.setDanmuDuration(e[o]);break;case"orbitGap":n.options.orbitGap=e[o];break}};return{options:u,dlp:f,focusIt:m,speedShift:h,mute:v,toggleDanmu:w,contactDanmu:g,applyDanmu:b,danmuStyle:k}},mounted:function(){return(0,a.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:case"end":return e.stop()}}),e)})))()},unmounted:function(){this.dlp&&this.dlp.destroy()}}),e()}),1)},59315:function(e,t,n){"use strict";n.a(e,(async function(e){var o=n(48534),a=(n(35666),n(41539),n(78783),n(33948),n(92222),n(64595)),r=n(28157),l=n(56598),i=n(89745),s=n(65490),c=n(40220),p=e([a]);a=(p.then?await p:p)[0];var u=function(){var e=(0,o.Z)(regeneratorRuntime.mark((function e(t){var o,a,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t.toLowerCase()),e.t0=t.toLowerCase(),e.next="hls"===e.t0?4:"flv"===e.t0?10:"webtorrent"===e.t0?16:"dash"===e.t0?22:28;break;case 4:if(window["Hls"]){e.next=9;break}return e.next=7,n.e(31).then(n.t.bind(n,67631,23));case 7:o=e.sent,window["Hls"]=o.default;case 9:return e.abrupt("break",28);case 10:if(window["flvjs"]){e.next=15;break}return e.next=13,Promise.all([n.e(184),n.e(197)]).then(n.t.bind(n,80510,23));case 13:a=e.sent,window["flvjs"]=a.default;case 15:return e.abrupt("break",28);case 16:if(window["WebTorrent"]){e.next=21;break}return e.next=19,Promise.all([n.e(184),n.e(415)]).then(n.t.bind(n,50861,23));case 19:r=e.sent,window["WebTorrent"]=r.default;case 21:return e.abrupt("break",28);case 22:if(window["dashjs"]){e.next=27;break}return e.next=25,Promise.all([n.e(184),n.e(197)]).then(n.t.bind(n,97743,23));case 25:l=e.sent,window["dashjs"]=l.default;case 27:return e.abrupt("break",28);case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t["Z"]=(0,l.defineComponent)({name:"lzyplayer",inheritAttrs:!1,props:{dlplayerConfigs:Object,animeTemp:Object,toolbar:{type:Object,default:{wideplay:!1,autoNext:!0,footerMsg:""}}},components:{"ly-dlplayer":a.Z},setup:function(e){var t=(0,l.getCurrentInstance)(),n=t.proxy,o=(0,r.AW)(),a=e.animeTemp,p=(0,c.g)(n,l.onUnmounted),u=(0,i.deepRefresh)((0,i.deepSupplement)({danmaku:{bottom:"46px",addition:[]},storageMode:"inner",settingStorage:{opacity:.9,volume:.5,danmaku:1,autoplay:1},dlbFull:!1,hotkeyProxy:!0},e.dlplayerConfigs),e.dlplayerConfigs),d=null,f=null;(0,l.onMounted)((function(){f=n.$refs.dlplayer,d=f.dlp,n.dlpIns=d,n.dlpWrap=f;var e=(0,s.a8)((function(e){d._on("fullscreen",e)}),(function(e){d._on("fullscreen_cancel",e)}),a);e&&(0,l.onUnmounted)((function(){var t=e.lockHandle,n=e.unlockHandle;d._off("fullscreen",t),d._off("fullscreen_cancel",n)})),(0,l.watchEffect)((function(){d.options.dlbFull=u.dlbFull}))}));var y=(0,l.reactive)({title:"",name:"untitled",src:null,type:"auto",poster:"",topbar:null,preplay:function(e){},postplay:function(e){}});return{display:o,dlplayerOptions:u,playingMeta:y,hotkeyList:p}},computed:{},methods:{playevent:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];this.$emit.apply(this,[e,this.dlpIns].concat(n))},reloadVideo:function(){var e=this.dlpIns,t=e.video.currentTime;e.switchVideo({pic:this.playingMeta.poster,url:this.playingMeta.src,type:this.playingMeta.type},{topbar:this.playingMeta.topbar}),e.seek(t),e.play()},lzyplay:function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function n(){var o,a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o={preplay:function(e,t){},postplay:function(e,t){}},Object.assign(t.playingMeta,o),(0,i.objectRefresh)(t.playingMeta,e),n.next=5,u(t.playingMeta.type);case 5:a=t.dlpIns,r=t.dlpWrap,e.preplay(r,a),a.switchVideo({pic:t.playingMeta.poster,url:t.playingMeta.src,type:t.playingMeta.type},{topbar:t.playingMeta.topbar}),a.seek(0),a.play(),e.postplay(r,a);case 13:case"end":return n.stop()}}),n)})))()},hotkeyResp:function(e,t){var n,o,a=null===(n=document.activeElement)||void 0===n?void 0:n.tagName.toUpperCase(),r=null===(o=document.activeElement)||void 0===o?void 0:o.getAttribute("contenteditable");"INPUT"!==a&&"TEXTAREA"!==a&&""!==r&&"true"!==r&&this.dlpIns.hotkey.hotkeyResp(e,t)},relocatePlayer:function(){var e=this.$el;e&&this.$magic.utils.lyscrollTo({target:e,offsetTop:-77})}},mounted:function(){var e=this,t=this.$magic.utils.addToInterface;t((function(t){t(e.dlpIns,e)}),"auiplayer")},unmounted:function(){}})}))},40220:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var o=n(23176),a=!1,r=function(e,t){return[{name:"toggle-danmu",descriptions:"切换弹幕显示",commonKey:"D",invoke:function(){e.dlpWrap.toggleDanmu()}},{name:"toggle-mute",descriptions:"快速切换播放器静音",commonKey:"M",invoke:function(){e.dlpWrap.mute()}},{name:"next-episode",descriptions:"播放下一集",commonKey:"]",invoke:function(t){e.playevent("playnext")}},{name:"pre-episode",descriptions:"播放上一集",commonKey:"[",invoke:function(t){e.playevent("playnext",!0)}},{name:"player-relocate",descriptions:"滚动定位并聚焦到播放器",commonKey:"R",invoke:function(t){e.relocatePlayer(),e.dlpWrap.focusIt()}},{name:"player-full",descriptions:"播放器全屏",commonKey:"F",invoke:function(t){e.hotkeyResp("f",t)}},{name:"player-webfull",descriptions:"播放器网页全屏",commonKey:"W",invoke:function(t){e.hotkeyResp("w",t)}},{name:"player-forward",descriptions:"方向键→短按前进5s,长按倍速播放",commonKey:"ArrowRight",invoke:function(){var n=!1,r=0,l=0,i=0,s=function(t){"ArrowRight"===t.code&&r>0&&(a&&o.DEBUG&&console.log("onkeyup",{counts:r,gearGap:l,onceActive:n}),e.dlpWrap.speedShift(l),n=!1,r=0,l=0)};return t((function(){window.removeEventListener("keyup",s)})),window.addEventListener("keyup",s),function(t){a&&o.DEBUG&&console.log("keydown",{counts:r,gearGap:l,onceActive:n,eve:t}),!0!==n&&(clearTimeout(i),i=setTimeout((function(){r<=0?e.hotkeyResp("right",t):l=e.dlpWrap.speedShift(4)}),175),r++,n=!0)}}()},{name:"player-backward",descriptions:"方向键←视频播放后退5s",commonKey:"ArrowLeft",invoke:function(t){e.hotkeyResp("left",t)}},{name:"player-up",descriptions:"方向键↑播放器提高5%",commonKey:"ArrowUp",invoke:function(t){e.hotkeyResp("up",t)}},{name:"player-down",descriptions:"方向键↓播放器音量减小5%",commonKey:"ArrowDown",invoke:function(t){e.hotkeyResp("down",t)}},{name:"player-pause",descriptions:"播放器的播放暂停的切换",commonKey:" ",invoke:function(t){t.preventDefault(),e.hotkeyResp("space",t)}},{name:"player-esc",descriptions:"ESC键退出全屏播放",commonKey:"Escape",invoke:function(t){e.hotkeyResp("ESC",t)}}]}},64595:function(e,t,n){"use strict";n.a(e,(async function(e){var o=n(94810),a=n(49777),r=n(83744),l=e([a]);a=(l.then?await l:l)[0];const i=(0,r.Z)(a.Z,[["render",o.s]]);t["Z"]=i}))},40541:function(e,t,n){"use strict";n.a(e,(async function(e){var o=n(54341),a=n(44317),r=(n(30585),n(83744)),l=e([a]);a=(l.then?await l:l)[0];const i=(0,r.Z)(a.Z,[["render",o.s]]);t["Z"]=i}))},10189:function(e,t,n){"use strict";n.r(t);var o=n(8081),a=n.n(o),r=n(23645),l=n.n(r),i=l()(a());i.push([e.id,'#lzyplayer{width:100%;border:1px solid gray;box-shadow:2px 3px 10px #000}#lzyplayer .player-head{margin:7px auto 10px 12px;color:#21acff;width:100%;min-height:1.25em}#lzyplayer .player-head span{color:#000}#lzyplayer .player-head span:before{content:"·";color:rgb(var(--v-theme-on-background));font-size:18px;display:inline-block;margin:auto 5px}#lzyplayer .player-controller{display:flex;justify-content:space-around;align-items:center;width:100%;padding:0 0 0 6px;font-size:12px;background-color:rgb(var(--v-theme-surface));-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#lzyplayer .player-controller>span{color:rgb(var(--v-theme-on-surface));flex:1 1 auto;text-align:center}#lzyplayer .player-controller>span.player-switch>*{display:inline-block;vertical-align:middle}#lzyplayer .player-controller>span.player-msg-container{flex:2 2 auto}#lzyplayer .player-controller>span.player-msg-container .player-msg{display:inline-flex;align-items:center;padding-left:.75em;height:28px;list-style:28px;min-width:188px;width:88%;font-size:12px;border:1px solid #ecf2f9;border-radius:4px;background-color:#ecf2f9;box-shadow:0 0 1px gray;overflow:hidden;overflow:-moz-hidden-unscrollable}#lzyplayer .player-controller>span.player-msg-container .player-msg .rollbar{word-break:keep-all;white-space:nowrap;overflow:visible;width:-webkit-max-content;width:-moz-max-content;width:max-content}#lzyplayer .player-controller>span.player-msg-container .player-msg:hover .rollbar{-webkit-animation:lzyXTransform 6s cubic-bezier(.3,.19,.73,1.21) infinite;animation:lzyXTransform 6s cubic-bezier(.3,.19,.73,1.21) infinite}@-webkit-keyframes lzyXTransform{0%,to{transform:translateX(0)}50%{transform:translateX(calc(18em - 100%))}}@keyframes lzyXTransform{0%,to{transform:translateX(0)}50%{transform:translateX(calc(18em - 100%))}}#lzyplayer .player-controller .player-switch.auto-next .v-switch .v-selection-control.v-selection-control--dirty{color:#eab4f8}.dark-token #lzyplayer .player-controller span.player-msg-container .player-msg{border:1px solid #060c13;background-color:#060c13}',""]),t["default"]=i},49777:function(e,t,n){"use strict";n.a(e,(async function(e){n.d(t,{Z:function(){return o.Z}});var o=n(34751),a=e([o]);o=(a.then?await a:a)[0]}))},44317:function(e,t,n){"use strict";n.a(e,(async function(e){n.d(t,{Z:function(){return o.Z}});var o=n(59315),a=e([o]);o=(a.then?await a:a)[0]}))},30585:function(e,t,n){"use strict";n(11680)},11680:function(e,t,n){var o=n(10189);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var a=n(54402).Z;a("19a4de0c",o,!0,{sourceMap:!1,shadowMode:!1})},94810:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});var o=n(56598),a={id:"dlplayer"};function r(e,t){return(0,o.openBlock)(),(0,o.createElementBlock)("div",a)}},54341:function(e,t,n){"use strict";n.d(t,{s:function(){return T}});n(68309),n(74916),n(15306);var o=n(56598),a=n(52653),r=n(46769),l=n(76924),i={class:"player-head"},s={class:"player-controller"},c={"data-balloon":"播放下一集","data-balloon-pos":"down"},p=(0,o.createTextVNode)("mdi-skip-next"),u={key:0,class:"player-switch"},d=(0,o.createElementVNode)("span",null,"宽屏",-1),f={"data-balloon":"卡点重载","data-balloon-pos":"down"},y=(0,o.createTextVNode)("mdi-sync"),m={key:1,class:"player-msg-container"},h=["title"],v=["innerHTML"],w={"data-balloon":"选择弹幕","data-balloon-pos":"down"},g=(0,o.createTextVNode)("mdi-message-bulleted"),b={"data-balloon":"外挂额外弹幕","data-balloon-pos":"down"},k=(0,o.createTextVNode)("mdi-text-box-plus"),x={class:"player-switch auto-next"},E=(0,o.createElementVNode)("span",null,"自动切P",-1);function T(e,t){var n=(0,o.resolveComponent)("ly-dlplayer"),T=(0,o.resolveDirective)("shortcuts");return(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("div",{id:"lzyplayer",onClick:t[8]||(t[8]=function(){var t;return e.$refs.dlplayer.focusIt&&(t=e.$refs.dlplayer).focusIt.apply(t,arguments)})},[(0,o.createElementVNode)("h4",i,[(0,o.createTextVNode)((0,o.toDisplayString)("".concat(e.playingMeta.title))+" ",1),(0,o.withDirectives)((0,o.createElementVNode)("span",{style:{color:"#ff9800"}},(0,o.toDisplayString)(e.playingMeta.name),513),[[o.vShow,e.playingMeta.title&&e.playingMeta.name]])]),(0,o.createVNode)(n,{ref:"dlplayer",options:e.dlplayerOptions,onOnplaynext:t[0]||(t[0]=function(t){return e.playevent("playnext")}),onEnded:t[1]||(t[1]=function(t){return e.playevent("ended")})},null,8,["options"]),(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("span",c,[(0,o.createVNode)(a.T,{size:"small",color:"#fcbad3",onClick:t[2]||(t[2]=function(t){return e.playevent("playnext")})},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(r.t,{color:"white"},{default:(0,o.withCtx)((function(){return[p]})),_:1})]})),_:1})]),e.animeTemp.isMobile?(0,o.createCommentVNode)("",!0):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("span",u,[d,(0,o.createVNode)(l.G,{light:"",class:"ml-2",inset:"","hide-details":"",color:"tertiary",modelValue:e.toolbar.wideplay,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.toolbar.wideplay=t})},null,8,["modelValue"])])),[[T,{name:"player-widden",descriptions:"切换播放器宽屏模式",statuKey:null,commonKey:"E",caseSensitive:!1,invoke:function(t){e.toolbar.wideplay=!e.toolbar.wideplay}}]]),(0,o.createElementVNode)("span",f,[(0,o.createVNode)(a.T,{size:"small",color:"#fce2ce",onClick:t[4]||(t[4]=function(t){return e.reloadVideo()})},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(r.t,{color:"white"},{default:(0,o.withCtx)((function(){return[y]})),_:1})]})),_:1})]),e.animeTemp.isMobile?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("span",m,[(0,o.createElementVNode)("div",{class:"player-msg",title:e.toolbar.footerMsg.replace(/<span[^<>]*?>(.*?)<\/span>/g,"$1")},[(0,o.createElementVNode)("div",{class:"rollbar",innerHTML:e.toolbar.footerMsg},null,8,v)],8,h)])),(0,o.createElementVNode)("span",w,[(0,o.createVNode)(a.T,{icon:"",size:"small",flat:"",onClick:t[5]||(t[5]=(0,o.withModifiers)((function(t){return e.$emit("open-select")}),["stop"]))},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(r.t,{color:"info"},{default:(0,o.withCtx)((function(){return[g]})),_:1})]})),_:1})]),(0,o.createElementVNode)("span",b,[(0,o.createVNode)(a.T,{icon:"",size:"small",flat:"",onClick:t[6]||(t[6]=(0,o.withModifiers)((function(t){return e.$emit("open-addition")}),["stop"]))},{default:(0,o.withCtx)((function(){return[(0,o.createVNode)(r.t,{color:"#eab4f8",style:{position:"relative",top:"-2px"}},{default:(0,o.withCtx)((function(){return[k]})),_:1})]})),_:1})]),(0,o.createElementVNode)("span",x,[E,(0,o.createVNode)(l.G,{"hide-details":"",class:"ml-2",inset:"",color:"#eab4f8",modelValue:e.toolbar.autoNext,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.toolbar.autoNext=t})},null,8,["modelValue"])])])])),[[T,e.hotkeyList]])}}}]);